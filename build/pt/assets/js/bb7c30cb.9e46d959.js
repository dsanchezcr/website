"use strict";(self.webpackChunkdsanchezcr=self.webpackChunkdsanchezcr||[]).push([[4427],{2672:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>n,metadata:()=>t,toc:()=>u});var i=r(5893),a=r(1151);const n={title:"Criando um formul\xe1rio de contato simples",description:"Nesta oportunidade, criaremos um formul\xe1rio de contato com o Azure Functions e os Servi\xe7os de Comunica\xe7\xe3o do Azure",slug:"building-a-contact-form-with-azure",authors:["dsanchezcr"],tags:["Azure Functions","GitHub Actions","Azure Communication Services","Azure Static Web Apps"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/BuiltContactForm/ContactForm.jpg",date:"2023-04-23T18:00"},s="Criando um formul\xe1rio de contato simples com o Azure",t={permalink:"/pt/blog/building-a-contact-form-with-azure",source:"@site/i18n/pt/docusaurus-plugin-content-blog/2023-04-23-BuildContactForm.mdx",title:"Criando um formul\xe1rio de contato simples",description:"Nesta oportunidade, criaremos um formul\xe1rio de contato com o Azure Functions e os Servi\xe7os de Comunica\xe7\xe3o do Azure",date:"2023-04-23T18:00:00.000Z",formattedDate:"23 de abril de 2023",tags:[{label:"Azure Functions",permalink:"/pt/blog/tags/azure-functions"},{label:"GitHub Actions",permalink:"/pt/blog/tags/git-hub-actions"},{label:"Azure Communication Services",permalink:"/pt/blog/tags/azure-communication-services"},{label:"Azure Static Web Apps",permalink:"/pt/blog/tags/azure-static-web-apps"}],readingTime:4.55,hasTruncateMarker:!0,authors:[{name:"David Sanchez",url:"https://github.com/dsanchezcr",imageURL:"https://github.com/dsanchezcr.png",key:"dsanchezcr"}],frontMatter:{title:"Criando um formul\xe1rio de contato simples",description:"Nesta oportunidade, criaremos um formul\xe1rio de contato com o Azure Functions e os Servi\xe7os de Comunica\xe7\xe3o do Azure",slug:"building-a-contact-form-with-azure",authors:["dsanchezcr"],tags:["Azure Functions","GitHub Actions","Azure Communication Services","Azure Static Web Apps"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/BuiltContactForm/ContactForm.jpg",date:"2023-04-23T18:00"},unlisted:!1,prevItem:{title:"Commits verificados no GitHub",permalink:"/pt/blog/verified-commits-in-github"},nextItem:{title:"Azure DevOps para GitHub \u2013 Migra\xe7\xe3o de Reposit\xf3rios",permalink:"/pt/blog/azure-devops-to-github-repo-migration"}},c={authorsImageUrls:[void 0]},u=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Por que o Azure Functions?",id:"por-que-o-azure-functions",level:2},{value:"O que \xe9 o Servi\xe7o de Comunica\xe7\xe3o do Azure?",id:"o-que-\xe9-o-servi\xe7o-de-comunica\xe7\xe3o-do-azure",level:2},{value:"Criando o Formul\xe1rio de Contato usando o Azure Functions e o Servi\xe7o de Comunica\xe7\xe3o do Azure",id:"criando-o-formul\xe1rio-de-contato-usando-o-azure-functions-e-o-servi\xe7o-de-comunica\xe7\xe3o-do-azure",level:2},{value:"1. Criar os recursos do Azure",id:"1-criar-os-recursos-do-azure",level:4},{value:"2. Configurar os Servi\xe7os de Comunica\xe7\xe3o do Azure - Servi\xe7o de Email",id:"2-configurar-os-servi\xe7os-de-comunica\xe7\xe3o-do-azure---servi\xe7o-de-email",level:4},{value:"3. Desenvolver a fun\xe7\xe3o do Azure",id:"3-desenvolver-a-fun\xe7\xe3o-do-azure",level:4},{value:"4. Desenvolva o front-end",id:"4-desenvolva-o-front-end",level:4},{value:"5. A\xe7\xf5es do GitHub para criar e implantar a solu\xe7\xe3o",id:"5-a\xe7\xf5es-do-github-para-criar-e-implantar-a-solu\xe7\xe3o",level:4},{value:"Testando a solu\xe7\xe3o",id:"testando-a-solu\xe7\xe3o",level:2}];function d(e){const o={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.p,{children:"Nesta postagem, criaremos um formul\xe1rio de contato com o Azure Functions e os Servi\xe7os de Comunica\xe7\xe3o do Azure."}),"\n",(0,i.jsx)(o.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Ter um formul\xe1rio de contato funcional em seu site \xe9 essencial. Um formul\xe1rio de contato \xe9 uma maneira simples, mas eficaz, de receber consultas e feedback de seus visitantes, clientes ou clientes. Nesta postagem de blog, compartilharei minha experi\xeancia na cria\xe7\xe3o de um formul\xe1rio de contato usando o Azure Functions e o Servi\xe7o de Email do Servi\xe7o de Comunica\xe7\xe3o do Azure."}),"\n",(0,i.jsx)(o.h2,{id:"por-que-o-azure-functions",children:"Por que o Azure Functions?"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=DT-MVP-5005361",children:"Fun\xe7\xf5es do Azure"})," \xe9 um servi\xe7o de computa\xe7\xe3o sem servidor oferecido pelo Microsoft Azure. Ele permite que os desenvolvedores criem, executem e dimensionem aplicativos sem precisar gerenciar a infraestrutura. O Azure Functions d\xe1 suporte a v\xe1rias linguagens de programa\xe7\xe3o, incluindo C#, Java, JavaScript, Python e PowerShell."]}),"\n",(0,i.jsx)(o.p,{children:"Nesse caso, meu site est\xe1 sendo executado em um aplicativo Web est\xe1tico, portanto, preciso usar uma solu\xe7\xe3o sem servidor para criar o formul\xe1rio de contato. O Azure Functions \xe9 uma \xf3tima op\xe7\xe3o porque me permite criar um formul\xe1rio de contato sem ter que gerenciar a infraestrutura ou me preocupar com as complexidades dos protocolos de comunica\xe7\xe3o."}),"\n",(0,i.jsx)(o.h2,{id:"o-que-\xe9-o-servi\xe7o-de-comunica\xe7\xe3o-do-azure",children:"O que \xe9 o Servi\xe7o de Comunica\xe7\xe3o do Azure?"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/communication-services/overview?WT.mc_id=DT-MVP-5005361",children:"Servi\xe7o de Comunica\xe7\xe3o do Azure"})," \xe9 uma plataforma de comunica\xe7\xe3o oferecida pelo Microsoft Azure. Ele fornece aos desenvolvedores as ferramentas e servi\xe7os para integrar recursos de comunica\xe7\xe3o em tempo real, como voz, v\xeddeo, bate-papo e mensagens SMS em seus aplicativos. O Servi\xe7o de Comunica\xe7\xe3o do Azure tamb\xe9m oferece um ",(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/communication-services/concepts/email/email-overview?WT.mc_id=DT-MVP-5005361",children:"Servi\xe7o de e-mail"})," que permite que os desenvolvedores enviem e recebam e-mails programaticamente."]}),"\n",(0,i.jsx)(o.h2,{id:"criando-o-formul\xe1rio-de-contato-usando-o-azure-functions-e-o-servi\xe7o-de-comunica\xe7\xe3o-do-azure",children:"Criando o Formul\xe1rio de Contato usando o Azure Functions e o Servi\xe7o de Comunica\xe7\xe3o do Azure"}),"\n",(0,i.jsx)(o.p,{children:"Para criar um formul\xe1rio de contato usando o Azure Functions e o Servi\xe7o de Email do Servi\xe7o de Comunica\xe7\xe3o do Azure, segui estas etapas:"}),"\n",(0,i.jsx)(o.h4,{id:"1-criar-os-recursos-do-azure",children:"1. Criar os recursos do Azure"}),"\n",(0,i.jsx)(o.p,{children:"A primeira etapa foi criar os recursos do Azure. Estes s\xe3o os recursos que usei neste aplicativo de exemplo:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/communication-services/quickstarts/create-communication-resource?WT.mc_id=DT-MVP-5005361",children:"Servi\xe7o de Comunica\xe7\xe3o do Azure"})," - para gerenciar o servi\xe7o de e-mail."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/communication-services/quickstarts/email/create-email-communication-resource?WT.mc_id=DT-MVP-5005361",children:"Servi\xe7o de Email do Azure (Parte do Servi\xe7o de Comunica\xe7\xe3o do Azure)"})," - para enviar os e-mails."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/azure-functions/functions-create-first-function-vs-code?pivots=programming-language-csharp?WT.mc_id=DT-MVP-5005361",children:"Fun\xe7\xe3o do Azure"})," - para processar o gatilho HTTP enviado pelo HTML e enviar os emails usando o Servi\xe7o de Comunica\xe7\xe3o do Azure."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/azure/static-web-apps/getting-started?WT.mc_id=DT-MVP-5005361",children:"Aplicativo Web Est\xe1tico do Azure"})," - para hospedar o site (\xcdndice.html neste caso)."]}),"\n"]}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"/img/BuiltContactForm/AzureResourceVisualizer.jpg",alt:""})}),"\n",(0,i.jsx)(o.h4,{id:"2-configurar-os-servi\xe7os-de-comunica\xe7\xe3o-do-azure---servi\xe7o-de-email",children:"2. Configurar os Servi\xe7os de Comunica\xe7\xe3o do Azure - Servi\xe7o de Email"}),"\n",(0,i.jsx)(o.p,{children:"A pr\xf3xima etapa foi configurar os Servi\xe7os de Comunica\xe7\xe3o do Azure - Servi\xe7o de Email. Isso inclui a configura\xe7\xe3o de um endere\xe7o de e-mail para enviar e-mails. Ao criar esse servi\xe7o, voc\xea pode escolher se deseja usar um subdom\xednio do Azure ou se deseja configurar seu pr\xf3prio dom\xednio."}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"/img/BuiltContactForm/AzureEmailCommunicationService.jpg",alt:""})}),"\n",(0,i.jsx)(o.p,{children:"Nesse caso, usei o endere\xe7o de email provisionado por um subdom\xednio do Azure."}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"/img/BuiltContactForm/DomainProvision.jpg",alt:""})}),"\n",(0,i.jsx)(o.p,{children:"O endere\xe7o de e-mail foi criado e configurado automaticamente:"}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"/img/BuiltContactForm/EmailCommunicationService.jpg",alt:""})}),"\n",(0,i.jsx)(o.h4,{id:"3-desenvolver-a-fun\xe7\xe3o-do-azure",children:"3. Desenvolver a fun\xe7\xe3o do Azure"}),"\n",(0,i.jsx)(o.p,{children:"A primeira etapa foi criar uma Fun\xe7\xe3o do Azure. Voc\xea pode escolher entre v\xe1rios modelos com base na linguagem de programa\xe7\xe3o de sua escolha. Nesse caso, usei o VS Code para criar a Fun\xe7\xe3o do Azure C# com um gatilho HTTP. A Fun\xe7\xe3o envia dois e-mails, um para notificar o propriet\xe1rio do site e outro para notificar o usu\xe1rio que envia a mensagem atrav\xe9s do site para que eu saiba que sua mensagem foi enviada."}),"\n",(0,i.jsxs)(o.blockquote,{children:["\n",(0,i.jsxs)(o.p,{children:["Para chamar a Fun\xe7\xe3o do Azure, \xe9 necess\xe1rio enviar tr\xeas par\xe2metros: ",(0,i.jsx)(o.code,{children:"name"}),", ",(0,i.jsx)(o.code,{children:"email"}),"e ",(0,i.jsx)(o.code,{children:"message"}),".\r\nAl\xe9m disso, a Fun\xe7\xe3o est\xe1 usando tr\xeas vari\xe1veis de ambiente que voc\xea precisa criar na configura\xe7\xe3o da Fun\xe7\xe3o do Azure:"]}),"\n"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"myEmailAddress"}),": para notificar o propriet\xe1rio do site de que uma nova mensagem foi recebida."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"senderEmailAddress"}),": o endere\xe7o de email que foi provisionado na configura\xe7\xe3o do Servi\xe7o de Comunica\xe7\xe3o do Azure."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"AzureCommunicationServicesConnectionString"}),": a cadeia de conex\xe3o que foi provisionada na configura\xe7\xe3o do Servi\xe7o de Comunica\xe7\xe3o do Azure."]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["O ",(0,i.jsx)(o.a,{href:"https://learn.microsoft.com/dotnet/api/azure.communication.email.emailclient?WT.mc_id=DT-MVP-5005361&view=azure-dotnet",children:"Cliente de e-mail"})," classe \xe9 usada para enviar emails usando o Servi\xe7o de Email do Servi\xe7o de Comunica\xe7\xe3o do Azure e \xe9 inicializada com a cadeia de conex\xe3o."]}),"\n",(0,i.jsx)(o.p,{children:"O trecho de c\xf3digo a seguir mostra a fun\xe7\xe3o de gatilho HTTP:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-c",metastring:'reference title="Azure Function HTTP Trigger - SendEmails.cs"',children:"https://github.com/dsanchezcr/ContactFormWithAzure/blob/9f619eb2c8d41e45574557dbf3c2f95486391d30/api/SendEmails.cs#L17-L57\n"})}),"\n",(0,i.jsx)(o.h4,{id:"4-desenvolva-o-front-end",children:"4. Desenvolva o front-end"}),"\n",(0,i.jsx)(o.p,{children:"No meu caso, criei um arquivo HTML simples e adicionei os campos de formul\xe1rio necess\xe1rios para o formul\xe1rio de contato, nome, e-mail e mensagem."}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-html",metastring:'reference title="Form to to send the email"',children:"https://github.com/dsanchezcr/ContactFormWithAzure/blob/9f619eb2c8d41e45574557dbf3c2f95486391d30/Index.html#L123-L137\n"})}),"\n",(0,i.jsx)(o.p,{children:"Aqui est\xe1 o c\xf3digo JavaScript que usei para processar a chamada para o Azure Function:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-javascript",metastring:'reference title="JavaScript code to call the Azure Function"',children:"https://github.com/dsanchezcr/ContactFormWithAzure/blob/9f619eb2c8d41e45574557dbf3c2f95486391d30/Index.html#L8-L32\n"})}),"\n",(0,i.jsx)(o.h4,{id:"5-a\xe7\xf5es-do-github-para-criar-e-implantar-a-solu\xe7\xe3o",children:"5. A\xe7\xf5es do GitHub para criar e implantar a solu\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Criei uma A\xe7\xe3o do GitHub para criar e implantar a Fun\xe7\xe3o do Azure e o site. O trecho de c\xf3digo a seguir mostra a A\xe7\xe3o do GitHub:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-yaml",metastring:'reference title="GitHub Action to build and deploy the solution"',children:"https://github.com/dsanchezcr/ContactFormWithAzure/blob/9f619eb2c8d41e45574557dbf3c2f95486391d30/.github/workflows/main_contactformwithazure.yml#L1-L45\n"})}),"\n",(0,i.jsxs)(o.blockquote,{children:["\n",(0,i.jsx)(o.p,{children:"A A\xe7\xe3o do GitHub est\xe1 usando dois segredos que voc\xea precisa configurar:"}),"\n"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"AZUREAPPSERVICE_PUBLISHPROFILE"}),": o perfil de publica\xe7\xe3o da Fun\xe7\xe3o do Azure."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"AZURE_STATIC_WEB_APPS_API_TOKEN"}),": o token de API do Aplicativo Web Est\xe1tico do Azure."]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"testando-a-solu\xe7\xe3o",children:"Testando a solu\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Testei a solu\xe7\xe3o enviando uma mensagem do formul\xe1rio de contato. A imagem a seguir mostra o email que foi enviado ao propriet\xe1rio do site e o email que foi enviado para o usu\xe1rio que postou a mensagem."}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"/img/BuiltContactForm/ContactFormResult.jpg",alt:""})}),"\n",(0,i.jsxs)(o.p,{children:["Voc\xea pode tentar a solu\xe7\xe3o ",(0,i.jsx)(o.a,{href:"https://purple-sky-05cd51e0f.3.azurestaticapps.net/Index.html",children:"aqui"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["E confira meu formul\xe1rio de contato de produ\xe7\xe3o ",(0,i.jsx)(o.a,{href:"https://dsanchezcr.com/contact",children:"aqui"}),"."]})]})}function m(e={}){const{wrapper:o}={...(0,a.a)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,o,r)=>{r.d(o,{Z:()=>t,a:()=>s});var i=r(7294);const a={},n=i.createContext(a);function s(e){const o=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(n.Provider,{value:o},e.children)}}}]);