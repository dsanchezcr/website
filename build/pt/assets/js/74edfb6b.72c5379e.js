"use strict";(self.webpackChunkdsanchezcr=self.webpackChunkdsanchezcr||[]).push([[7496],{2550:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>n,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var r=o(5893),t=o(1151);const a={title:"Listar reposit\xf3rios com seus tamanhos no Azure Repos",description:"Aprenda como listar seus Reposit\xf3rios do Azure com seus tamanhos usando o PowerShell.",slug:"list-azure-repos-with-sizes",authors:["dsanchezcr"],tags:["Azure DevOps","PowerShell"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/ListADORepos/ListADORepos.png",date:"2023-02-28T18:00"},n="Listar reposit\xf3rios com seus tamanhos no Azure Repos",i={permalink:"/pt/blog/list-azure-repos-with-sizes",source:"@site/i18n/pt/docusaurus-plugin-content-blog/2023-02-28-ListReposADO.mdx",title:"Listar reposit\xf3rios com seus tamanhos no Azure Repos",description:"Aprenda como listar seus Reposit\xf3rios do Azure com seus tamanhos usando o PowerShell.",date:"2023-02-28T18:00:00.000Z",formattedDate:"28 de fevereiro de 2023",tags:[{label:"Azure DevOps",permalink:"/pt/blog/tags/azure-dev-ops"},{label:"PowerShell",permalink:"/pt/blog/tags/power-shell"}],readingTime:1.06,hasTruncateMarker:!0,authors:[{name:"David Sanchez",url:"https://github.com/dsanchezcr",imageURL:"https://github.com/dsanchezcr.png",key:"dsanchezcr"}],frontMatter:{title:"Listar reposit\xf3rios com seus tamanhos no Azure Repos",description:"Aprenda como listar seus Reposit\xf3rios do Azure com seus tamanhos usando o PowerShell.",slug:"list-azure-repos-with-sizes",authors:["dsanchezcr"],tags:["Azure DevOps","PowerShell"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/ListADORepos/ListADORepos.png",date:"2023-02-28T18:00"},unlisted:!1,prevItem:{title:"Azure DevOps para GitHub \u2013 Migra\xe7\xe3o de Reposit\xf3rios",permalink:"/pt/blog/azure-devops-to-github-repo-migration"},nextItem:{title:"Economia de custos com o Azure para seus aplicativos Web",permalink:"/pt/blog/cost-savings-with-azure"}},c={authorsImageUrls:[void 0]},p=[];function l(e){const s={a:"a",code:"code",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Nesta breve postagem, mostrarei como listar os Reposit\xf3rios do Azure em um Projeto de DevOps do Azure com seus tamanhos em MB usando um script do PowerShell."}),"\n",(0,r.jsxs)(s.p,{children:["Para acompanhar este post, voc\xea precisar\xe1 criar um Token de Acesso Pessoal (PAT) com o permiss\xe3o de ",(0,r.jsx)(s.strong,{children:"C\xf3digo (leitura)"}),". Voc\xea pode ler mais sobre o PAT na ",(0,r.jsx)(s.a,{href:"https://learn.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?WT.mc_id=DT-MVP-5005361",children:"documenta\xe7\xe3o oficial"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-powershell",children:'$DevOpsServerName = "<YOUR AZURE DEVOPS SERVER NAME>"\r\n$ProjectCollection = "<YOUR PROJECT COLLECTION NAME>"\r\n$Project = "<YOUR PROJECT NAME>"\r\n$PAT = "<YOUR PERSONAL ACCESS TOKEN>"\r\n\r\n$baseUrl = https://$DevOpsServerName/$ProjectCollection/$Project/_apis/git/repositories?includeLinks={includeLinks}&includeAllUrls={includeAllUrls}&includeHidden={includeHidden}&api-version=6.0\r\n$base64AuthInfo= [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(":$($PAT)"))\r\n$headers = @{Authorization=("Basic {0}" -f $base64AuthInfo)}\r\n$repositories = Invoke-RestMethod -Uri $baseUrl -Method Get -Headers $headers\r\n\r\nforeach ($repo in $repositories.value) {\r\n    $repoName = $repo.name\r\n    $repoSize = [math]::Round(($repo.size / 1MB),2) \r\n    \r\n    Write-Output "$repoName $repoSize MB"\r\n} \n'})}),"\n",(0,r.jsx)(s.p,{children:"Aqui est\xe1 um exemplo da sa\xedda desse script:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-powershell",children:"Tailwind Traders 10.65 MB\r\nTailwindTraders-Backend 28.45 MB\r\nTailwindTraders-Website 14.04 MB \n"})}),"\n",(0,r.jsxs)(s.p,{children:["O script acima usa a API Rest do Azure DevOps para obter os reposit\xf3rios e seus tamanhos. Voc\xea pode ler mais sobre a API na ",(0,r.jsx)(s.a,{href:"https://learn.microsoft.com/rest/api/azure/devops/git/repositories/list?WT.mc_id=DT-MVP-5005361",children:"documenta\xe7\xe3o oficial"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Isso \xe9 \xfatil para saber o tamanho de seus reposit\xf3rios no caso de voc\xea estar planejando fazer uma migra\xe7\xe3o, ou no caso de voc\xea gostaria de saber se voc\xea tem arquivos grandes, e para saber se voc\xea precisa limpar alguns deles."}),"\n",(0,r.jsx)(s.p,{children:"Espero ter ajudado!"})]})}function d(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,s,o)=>{o.d(s,{Z:()=>i,a:()=>n});var r=o(7294);const t={},a=r.createContext(t);function n(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);