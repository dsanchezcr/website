"use strict";(self.webpackChunkdsanchezcr=self.webpackChunkdsanchezcr||[]).push([[3305],{2955:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=s(5893),o=s(1151);const i={title:"List repositories with their sizes in Azure Repos",description:"Learn how to list your Azure Repos with their sizes using PowerShell.",slug:"list-azure-repos-with-sizes",authors:["dsanchezcr"],tags:["Azure DevOps","PowerShell"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/ListADORepos/ListADORepos.png",date:"2023-02-28T18:00"},n="List repositories with their sizes in Azure Repos",a={permalink:"/blog/list-azure-repos-with-sizes",source:"@site/blog/2023-02-28-ListReposADO.mdx",title:"List repositories with their sizes in Azure Repos",description:"Learn how to list your Azure Repos with their sizes using PowerShell.",date:"2023-02-28T18:00:00.000Z",formattedDate:"February 28, 2023",tags:[{label:"Azure DevOps",permalink:"/blog/tags/azure-dev-ops"},{label:"PowerShell",permalink:"/blog/tags/power-shell"}],readingTime:1.09,hasTruncateMarker:!0,authors:[{name:"David Sanchez",url:"https://github.com/dsanchezcr",email:"dsanchezcr@outlook.com",imageURL:"https://github.com/dsanchezcr.png",key:"dsanchezcr"}],frontMatter:{title:"List repositories with their sizes in Azure Repos",description:"Learn how to list your Azure Repos with their sizes using PowerShell.",slug:"list-azure-repos-with-sizes",authors:["dsanchezcr"],tags:["Azure DevOps","PowerShell"],enableComments:!0,hide_table_of_contents:!0,image:"https://raw.githubusercontent.com/dsanchezcr/website/main/static/img/ListADORepos/ListADORepos.png",date:"2023-02-28T18:00"},unlisted:!1,prevItem:{title:"Azure DevOps to GitHub \u2013 Repo Migration",permalink:"/blog/azure-devops-to-github-repo-migration"},nextItem:{title:"Cost Savings with Azure for your Web Apps",permalink:"/blog/cost-savings-with-azure"}},l={authorsImageUrls:[void 0]},c=[];function h(e){const t={a:"a",code:"code",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"In this short post, I will show you how to list the Azure Repos in an Azure DevOps Project with their sizes in MB using a PowerShell script."}),"\n",(0,r.jsxs)(t.p,{children:["To follow this post, you will need to create a Personal Access Token (PAT) with the ",(0,r.jsx)(t.strong,{children:"Code (read)"})," permission. You can read more about PAT in the ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate",children:"official documentation"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-powershell",children:'$DevOpsServerName = "<YOUR AZURE DEVOPS SERVER NAME>"\r\n$ProjectCollection = "<YOUR PROJECT COLLECTION NAME>"\r\n$Project = "<YOUR PROJECT NAME>"\r\n$PAT = "<YOUR PERSONAL ACCESS TOKEN>"\r\n\r\n$baseUrl = https://$DevOpsServerName/$ProjectCollection/$Project/_apis/git/repositories?includeLinks={includeLinks}&includeAllUrls={includeAllUrls}&includeHidden={includeHidden}&api-version=6.0\r\n$base64AuthInfo= [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(":$($PAT)"))\r\n$headers = @{Authorization=("Basic {0}" -f $base64AuthInfo)}\r\n$repositories = Invoke-RestMethod -Uri $baseUrl -Method Get -Headers $headers\r\n\r\nforeach ($repo in $repositories.value) {\r\n    $repoName = $repo.name\r\n    $repoSize = [math]::Round(($repo.size / 1MB),2) \r\n    \r\n    Write-Output "$repoName $repoSize MB"\r\n} \n'})}),"\n",(0,r.jsx)(t.p,{children:"Here is an example of the output of that script:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-powershell",children:"Tailwind Traders 10.65 MB\r\nTailwindTraders-Backend 28.45 MB\r\nTailwindTraders-Website 14.04 MB \n"})}),"\n",(0,r.jsxs)(t.p,{children:["The script above use the Azure DevOps Rest API to get the repositories and their sizes. You can read more about the API in the ",(0,r.jsx)(t.a,{href:"https://docs.microsoft.com/rest/api/azure/devops/git/repositories/list?WT.mc_id=DT-MVP-5005361",children:"official documentation"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"This is helpful to know the size of your repositories in case you are planning to do a migration, or in case you would like to know if you have large files, and to know if you need to clean up some of them."}),"\n",(0,r.jsx)(t.p,{children:"Hope this helps!"})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>a,a:()=>n});var r=s(7294);const o={},i=r.createContext(o);function n(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);